# S1.1 â€“ Category model + migration (unique Name per Type)

---

### Context/Goal
Create the Category table with unique `(Name, Type)` and default fields.

### Instructions
ðŸ“– **[Complete Step-by-Step Instructions](https://github.com/tsalright-computer-programming/budget-buddy-app/blob/main/docs/instructions/S1.1/refactor-to-category-model.md)** - Detailed guide covering model refactoring, migrations, and database relationships.

### Acceptance Criteria
- Table created via migration.
- Unique index `(Name, Type)` enforced.
- Fields: `Id (GUID)`, `Name (2â€“50)`, `Type (Income|Expense)`, `IsArchived=false`, `CreatedUtc=UTC now`.

### Student Tasks
- [ ] Create enum:
```csharp
public enum CategoryType { Income = 1, Expense = 2 }
```
- [ ] Create model:
```csharp
public class Category {
  public Guid Id { get; set; }
  public string Name { get; set; } = string.Empty;
  public CategoryType Type { get; set; }
  public bool IsArchived { get; set; } = false;
  public DateTime CreatedUtc { get; set; } = DateTime.UtcNow;
}
```
- [ ] Add DbSet + unique index in `AppDbContext`:
```csharp
public DbSet<Category> Categories => Set<Category>();
protected override void OnModelCreating(ModelBuilder b){
  b.Entity<Category>().HasIndex(c => new { c.Name, c.Type }).IsUnique();
}
```
- [ ] Run `Add-Migration CreateCategories` â†’ `Update-Database`.